@model IEnumerable<Akelote_e_Shop.Models.Item>

@{
    ViewBag.Title = "Item";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section Scripts
{
    <script type="text/javascript" src="~/Scripts/jquery-1.10.2.min.js"></script>
    <script type="text/javascript" src="~/Scripts/add-to-cart.js"></script>
}

<h2>Items</h2>
@if (!Model.Any())
{
    <p>We don't have any items yet.</p>
}
else
{
    if (User.IsInRole("CanUseAdminAccess"))
    {
        <a href="/Items/New">Add new item</a>
    }

    <div class="catalog">
    @foreach (var item in Model)
    {
        <div class="catalog-item">
            <div class="catalog-item-image">
                <a href="/Items/Details/@item.Id"><img src="@(item.Images.Select(i => i.HyperLink).FirstOrDefault() ?? "/Content/NoImage.png")" /></a>
            </div>
            <div class="catalog-item-title">
                @Html.ActionLink(item.Title, "Details", "Items", new { id = item.Id }, null)
            </div>
            <div class="catalog-item-price">
                @item.ReadablePrice
            </div>
            <div class="catalog-item-add-to-cart">
                <a href="#" class="add-to-cart" data-id="@item.Id">Add to Cart</a>
            </div>
        </div>
    }
    </div>
}
